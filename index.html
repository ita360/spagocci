<!DOCTYPE html>
<html lang="it">
<head>
<link rel="icon" href="https://github.com/spagocci/recensioni/blob/main/icona.png" type="image/png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spagocci 1.1.0</title>
<style>
body {
  font-family:sans-serif;
  padding:20px;
  background:#f9f9f9;
}
button {
  margin-bottom:10px;
  padding:8px 12px;
  font-size:1em;
  cursor:pointer;
}

/* === INPUT NASCONDI & CERCA === */
#filtroParole {
  width:100%;
  max-width:400px;
  padding:8px 10px;
  margin:10px 0;
  font-size:1em;
  border:2px solid #b30000;
  border-radius:10px;
  box-sizing:border-box;
}

/* 🔍 CASSELLA "CERCA" con X */
#mostraBox {
  position:relative;
  width:100%;
  max-width:400px;
  margin:10px 0;
}
#mostraParole {
  width:100%;
  padding:8px 10px;
  font-size:1em;
  border:2px solid #b30000;
  border-radius:10px;
  box-sizing:border-box;
}
#clearMostra {
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  background:#b30000;
  color:white;
  border:none;
  border-radius:50%;
  width:22px;
  height:22px;
  cursor:pointer;
  font-weight:bold;
  display:none;
  line-height:18px;
  z-index:1;
}
#clearMostra:hover{background:darkred;}

#statusBar {
  display:flex;
  align-items:center;
  gap:15px;
  margin-bottom:15px;
}
#conteggioNascosti {
  font-weight:bold;
  color:#b30000;
}
#timer {
  font-weight:bold;
  color:#009900;
}

/* === LAYOUT === */
.row {
  display: flex;
  flex-wrap: wrap; /* ✅ permette di andare a capo */
  gap: 10px;
  height: auto;
}

.column {
  flex: 1 1 300px; /* ✅ minimo 300px di larghezza */
  background: linear-gradient(to bottom,#fff,#f0f0f0);
  padding: 20px;
  border-radius: 20px;
  border: none;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.05), 0 4px 10px rgba(0,0,0,0.1);
  overflow-y: auto;
}

/* === POSIZIONE SPECIALE VETRINA === */
.vetrina-top {
  width: 100%;
  margin-bottom: 25px; /* spazio tra vetrina e le colonne sotto */
  background: linear-gradient(to bottom, #fff, #f5f5f5);
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}


/* === OGGETTI SENZA CARD O BORDI === */
.contenuto {
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* ✅ impedisce overflow */
  gap: 6px; /* ✅ riduce leggermente lo spazio tra le card */
  padding: 0 4px; /* ✅ margine interno laterale minore */
  box-sizing: border-box; /* ✅ calcolo preciso larghezza */
}
.item-content img {
  max-width: 120px; /* ✅ leggermente più strette per far stare 2 intere */
}


.item {
  background: none;
  border: none;
  box-shadow: none;
  padding: 5px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.item-content {
  text-align: center;
}

.item-content img {
  width: 100%;
  max-width: 200px;
  aspect-ratio: 1/1;
  object-fit: contain;
  border-radius: 0;
}

.price-big {
  font-weight: bold;
  color: #009900;
  font-size: 1em;
}

.column a {
  color: #000;
  text-decoration: none;
  font-weight: bold;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.2em;
}
.column a:hover { text-decoration: underline; }

small { color: #666; font-size: 0.8em; }

/* === VETRINA SCORREVOLE === */
#contenutoVetrina {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  gap: 10px;
  scroll-behavior: smooth;
  padding-bottom: 10px;
}

#contenutoVetrina .item {
  flex: 0 0 auto;
  text-align: center;
  width: 160px; /* ✅ dimensione card più compatta */
}

/* === RESPONSIVE MOBILE === */
@media(max-width:768px){
  /* Layout generale */
  .row {
    flex-direction: column; /* ✅ una colonna per riga */
  }
  .column {
    flex: 1 1 100%;
    max-width: 100%;
    padding: 10px;
  }

  /* Oggetti nella griglia */
  .contenuto {
    grid-template-columns: repeat(2, 1fr); /* ✅ 2 oggetti per riga */
    gap: 8px;
  }
  .item-content img {
    max-width: 130px;   /* immagini più compatte */
  }

  /* Testo e dettagli */
  .column a {
    -webkit-line-clamp: 2;
    font-size: 0.8em;
    line-height: 1.1em;
  }
  .price-big { font-size: 0.9em; }
  small { font-size: 0.7em; }
  h2 { font-size: 0.9em; margin-bottom: 5px; }
}



/* === MODALE === */
#modaleParole{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.5);display:none;
  justify-content:center;align-items:center;z-index:1000;
}
#modaleContenuto{
  background:#fff;padding:20px;border-radius:15px;
  width:90%;max-width:500px;box-shadow:0 0 15px rgba(0,0,0,0.3);
}
#modaleContenuto textarea{
  width:100%;height:120px;font-size:1em;padding:8px;
  border-radius:8px;border:2px solid #b30000;resize:none;
}
#modaleContenuto button{margin-top:10px;margin-right:10px;}
</style>
</head>
<body>
<p class="link-bar">
  <b><a href="https://discord.gg/zE25rQfg">🤖DiSCORD</a> -
  <a href="https://sites.google.com/view/davidespagocci/informazioni">📘iSTRUZiONi</a> -
  <br><a href="https://www.ebay.it/sch/i.html?_dkr=1&_ssn=davidespagocci">🛍️EBAY</a></b>
</p>
<div id="mostraBox">
  <input id="mostraParole" type="text" placeholder="Cerca Parole (es: Cane, Per Lamborghini)🔍">
  <button id="clearMostra">❌</button>
</div>
<input id="filtroParole" type="text" placeholder="Nascondi Parole (es: Custodia, per finestre)🚫">
<button id="btnGestisciParole">✏️Nascoste🫣</button>
<button id="toggleAudio">📢Notifiche</button>
<button id="btnSoloMigliori">i <b>Migli⭐ri</b></button>
<button id="btnAdulti">🚫No Sesso</button>

<div id="statusBar">
  <span id="conteggioNascosti">🔕 Oggetti nascosti: 0</span>
  <span id="timer">60 s</span>
</div>
<!-- === MODALE === -->
<div id="modaleParole">
  <div id="modaleContenuto">
    <h3>✏️ Parole Nascoste</h3>
    <p>Inserisci parole o frasi separate da virgole o punti e virgola:</p>
    <textarea id="modaleTextarea"></textarea><br>
    <button id="salvaParole">💾 Salva</button>
    <button id="cancellaParole">🗑️ Cancella Tutto</button>
    <button id="chiudiModale">❌ Chiudi</button>
  </div>
</div>

<!-- === AUDIO === -->
<audio id="audioGenerale" src="https://raw.githubusercontent.com/spagocci/recensioni/main/tutti.mp3" preload="auto"></audio>
<audio id="audioPochiSecondi" src="https://raw.githubusercontent.com/spagocci/recensioni/main/perte.mp3" preload="auto"></audio>
<audio id="audioAttivate" src="https://raw.githubusercontent.com/spagocci/recensioni/main/attivate.mp3" preload="auto"></audio>
<audio id="audioDisattivate" src="https://raw.githubusercontent.com/spagocci/recensioni/main/disattivate.mp3" preload="auto"></audio>
<audio id="audioAggAttivato" src="https://raw.githubusercontent.com/spagocci/recensioni/main/aggattivato.mp3" preload="auto"></audio>
<audio id="audioAggDisattivato" src="https://raw.githubusercontent.com/spagocci/recensioni/main/aggdisattivato.mp3" preload="auto"></audio>
<audio id="audioValle" src="https://raw.githubusercontent.com/spagocci/recensioni/main/valledilacrime.mp3" preload="auto"></audio>


<!-- === VETRINA IN ALTO === -->
<div class="column vetrina-top" id="canaleVetrina">
  <h2>#Vetrina Disponibili da Subito o in Arrivo</h2>
  <div class="contenuto" id="contenutoVetrina"></div>
</div>

<!-- === COLONNE === -->
<div class="row">
  <div class="column" id="canaleSinistra">
    <h2>🤢Tutti🤮</h2>
    <div class="contenuto" id="contenutoSinistra"></div>
  </div>
  <div class="column" id="canaleFiltrati">
    <h2>⭐i migliori🛡️🙅‍♂️ Offerte per pochi secondi</h2>
    <div class="contenuto" id="contenutoFiltrati"></div>
  </div>
  <div class="column" id="canaleAdulti">
    <h2>🍑👙adulti💋🍓</h2>
    <div class="contenuto" id="contenutoAdulti"></div>
  </div>
  <div class="column" id="canaleDestra">
    <h2>👮‍♂️Sicurezza🚓🚨 (ignorate questa colonna serve a me per capire delle cose)</h2>
    <div class="contenuto" id="contenutoDestra"></div>
  </div>
</div>
<div style="
  background:#fff8e1;
  border-left:5px solid #b30000;
  padding:15px;
  border-radius:10px;
  font-family:sans-serif;
  font-size:1em;
  line-height:1.5em;
  color:#333;
  margin:15px 0;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
">
    <b>ℹ️ Attenzione!</b><br>
  Vedi la pagina VUOTA senza oggetti? è normale! questa pagina si riempie <b>solo durante le ondate di nuovi oggetti in offerta</b>, che durano pochi secondi.<br><br>
  🔔 Iscriviti al mio 
  <a href="https://whatsapp.com/channel/0029Vb6FyJ88qIzyi9nRtV2O" target="_blank" style="color:#0a84ff;font-weight:bold;text-decoration:none;">
    📦 canale WhatsApp
  </a> 
  per ricevere un avviso ogni volta che arriva una nuova ondata di oggetti.<br><br>
  <b>Oppure</b> lascia questa pagina aperta e 
  <b>attiva le notifiche</b> premendo il pulsante <b>AUDIO</b> in cima a questa pagina: 
  <span style="color:green;font-weight:bold;">sentirai un suono</span> ogni volta che mettono un oggetto<br>
  Contattami il più veloce che puoi su whattap quando vuoi uno di questi oggetti perchè purtroppo li fregano gli altri recensori in pochi secondi se non li prendiamo noi,spesso purtroppo non riesco a prenderli neanche io appena sono apparsi per un secondo...
  <b>ℹ️ Attenzione!</b><br>
  Nella colonna "Tutto" vedrai un sacco di cose fastidiose custodie,pellicole,decorazioni,trappole ecc. se non li vuoi vedere premi il bottone ⭐i migliori🛡️🙅‍♂️  in alto a questa pagina e verranno filtrate la maggior parte di cose inutili grazie a dei filtri creati in base a miei gusti
</div>

<button id="toggleRefresh">⏸ Ferma aggiornamento</button>
<button id="btnValle">😭 Valle Di Lacrime</button>

<!-- === BACHECA PUBBLICA "SPAGOCCI CHAT" === -->
<div id="spagocciChat" style="
  background:#fff;
  border:3px solid #b30000;
  border-radius:15px;
  padding:15px;
  margin-top:30px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
">
  <h2 style="text-align:center;">💬 SpagocciChat – Bacheca Messaggi Pubblica</h2>
  <div id="chatLista" style="
    max-height:400px;
    overflow-y:auto;
    background:#f9f9f9;
    border-radius:10px;
    padding:10px;
    margin-bottom:15px;
    border:1px solid #ddd;
  ">
    <p style="color:#555;">⏳ Caricamento messaggi in corso...</p>
  </div>

  <div style="display:flex;gap:10px;">
    <input id="chatInput" type="text" placeholder="✍️ Scrivi un messaggio nella SpagocciChat..." 
      style="flex:1;padding:8px;border:2px solid #b30000;border-radius:10px;font-size:1em;">
    <button id="chatInvia" style="
      background:#b30000;
      color:white;
      border:none;
      border-radius:10px;
      padding:8px 15px;
      cursor:pointer;
      font-weight:bold;
    ">📨 Invia</button>
  </div>
</div>

<script>
/* =========================================================
 * 💬 SPAGOCCI CHAT – Invio e Lettura Messaggi
 * =======================================================*/

// URL webhook Discord
const WEBHOOK_URL = "https://discord.com/api/webhooks/1433822966105374774/1fLCCm7tpDbkrf74anCEvsnGpu-O8klhx3Dy1daNEqk9OpAVgavKD4PQ1iB-hebNY2lX";

// File bacheca pubblico su GitHub
const BACHECA_URL = "https://spagocci.github.io/recensioni/bacheca.json";

// Elementi HTML
const chatInput = document.getElementById("chatInput");
const chatInvia = document.getElementById("chatInvia");
const chatLista = document.getElementById("chatLista");

// ID univoco per ogni visitatore
let mioID = localStorage.getItem("spagocciUserID");
if (!mioID) {
  mioID = "user_" + Math.random().toString(36).substring(2, 10);
  localStorage.setItem("spagocciUserID", mioID);
}

/* === INVIO MESSAGGIO === */
chatInvia.addEventListener("click", inviaMessaggio);
chatInput.addEventListener("keypress", e => {
  if (e.key === "Enter") inviaMessaggio();
});

async function inviaMessaggio() {
  const testo = chatInput.value.trim();
  if (!testo) return alert("✏️ Scrivi un messaggio prima di inviare!");

  const nome = "Utente " + mioID.slice(-4); // nome base anonimo
  const contenuto = `💬 ${nome} (${mioID}): ${testo}`;

  try {
    const res = await fetch(WEBHOOK_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ content: contenuto })
    });
    if (!res.ok) throw new Error("Errore di invio");

    chatInput.value = "";
    caricaBacheca(); // aggiorna subito la lista
  } catch (err) {
    alert("❌ Errore nell'invio del messaggio: " + err.message);
  }
}

/* === CARICAMENTO MESSAGGI DA GITHUB === */
async function caricaBacheca() {
  try {
    const res = await fetch(`${BACHECA_URL}?t=${Date.now()}`);
    if (!res.ok) throw new Error("Errore nel caricamento della bacheca");
    const data = await res.json();

    chatLista.innerHTML = "";
    if (data.length === 0) {
      chatLista.innerHTML = `<p style="color:#777;">(Nessun messaggio ancora)</p>`;
      return;
    }

    data.slice(-100).reverse().forEach(m => {
      const div = document.createElement("div");
      div.style = "background:white;padding:8px;margin-bottom:6px;border-radius:5px;border:1px solid #ddd;";
      div.innerHTML = `
        <b>${m.autore || "Anonimo"}</b>
        <small style="color:gray;">(${m.userId || "?"})</small>:
        ${m.testo}
      `;
      chatLista.appendChild(div);
    });

  } catch (e) {
    chatLista.innerHTML = `<p style="color:red;">❌ ${e.message}</p>`;
  }
}

// Aggiornamento automatico ogni 10 secondi
setInterval(caricaBacheca, 10000);
caricaBacheca();
</script>
<script>
caricaCatalogo();
setInterval(caricaCatalogo, 10000);
</script>  

</body>
  
</html>
 










